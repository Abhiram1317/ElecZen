<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>ElecZen ‚Äî EV Charging App</title>

<style>
/* -----------------------------------
   üî• ANIMATED LOADING SCREEN
----------------------------------- */
#loadingScreen {
  position: fixed;
  inset: 0;
  background: #000814;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 99999;
  flex-direction: column;
  color: white;
  font-family: 'Inter', sans-serif;
  animation: fadeOut 1s ease forwards;
  animation-delay: 2s;
}

.loaderRing {
  width: 80px;
  height: 80px;
  border: 6px solid #00ffe0;
  border-top-color: transparent;
  border-radius: 50%;
  animation: spin 1.2s linear infinite;
  box-shadow: 0 0 20px #00ffe0;
}

@keyframes spin {
  to { transform: rotate(360deg); }
}
@keyframes fadeOut {
  to { opacity: 0; visibility: hidden; }
}

/* -----------------------------------
   MAIN UI STYLES (unchanged)
----------------------------------- */
body {
  margin: 0;
  background: #0c0c1a;
  color: #e0f7ff;
  font-family: 'Inter', sans-serif;
  height: 100vh;
  overflow: hidden;
  transition: 0.3s;
}
body.light { background: #e8faff; color: #002029; }

#app { display: flex; height: 100%; }

/* Sidebar */
nav {
  width: 260px;
  background: #0b0b1f;
  padding: 20px;
  display: flex;
  flex-direction: column;
  gap: 15px;
  box-shadow: 0 0 20px #00ffe5 inset;
  transition: 0.3s;
}
nav.light { background: #c6f7ff; }

nav .logo {
  display: flex;
  align-items: center;
  gap: 10px;
}
nav .logo img {
  width: 55px;
  border-radius: 12px;
  box-shadow: 0 0 12px #00ffe0;
}

nav a {
  color: #e0f7ff;
  text-decoration: none;
  padding: 10px 12px;
  border-radius: 8px;
  font-weight: 600;
  transition: 0.3s;
}
nav a.active,
nav a:hover {
  background: #00ffe0;
  color: #001f2a;
  box-shadow: 0 0 12px #00ffe0;
}

/* Main area */
main { flex: 1; overflow: auto; padding: 30px; }

/* Cards */
.card {
  background: rgba(0,255,224,0.06);
  padding: 20px;
  border-radius: 12px;
  margin-bottom: 22px;
  box-shadow: 0 0 10px #00ffe0;
  transition: 0.3s;
}
.card:hover {
  transform: scale(1.02);
  box-shadow: 0 0 20px #00ffe0;
}

input, textarea, button, select {
  padding: 10px;
  width: 100%;
  margin-top: 8px;
  border-radius: 8px;
  border: none;
  outline: none;
}
button { cursor: pointer; font-weight: bold; }
button:disabled { opacity: 0.5; cursor: not-allowed; }

.btn-primary {
  background: linear-gradient(90deg, #00ffe0, #00bfff);
  color: #001f2a;
  box-shadow: 0 0 10px #00ffe0;
}

/* Feedback items */
.feedback-item {
  background: rgba(255,255,255,0.05);
  padding: 10px;
  border-radius: 8px;
  margin: 5px 0;
}

/* Mobile support */
@media(max-width: 768px){
  #app { flex-direction: column; }
  nav { width: 100%; flex-direction: row; overflow-x: auto; }
  nav a { flex: 1; text-align:center; padding:10px; }
}
</style>
</head>

<body>

<!-- üî• LOADING SCREEN -->
<div id="loadingScreen">
  <div class="loaderRing"></div>
  <p style="margin-top:15px;font-size:18px;">Loading ElecZen...</p>
</div>

<div id="app">

<!-- SIDEBAR -->
<nav>
  <div class="logo">
    <img src="ElecZen.jpg">
    <span style="font-size:20px;font-weight:700;">ElecZen</span>
  </div>

  <button id="themeToggle" class="btn-primary">Toggle Theme</button>

  <a data-page="home" class="active">üè† Home</a>
  <a data-page="register">üìù Register</a>
  <a data-page="login">üîê Login</a>
  <a data-page="account">üë§ Account</a>
  <a data-page="payments">üí≥ Payments</a>
  <a data-page="history">üìò Booking History</a>
  <a data-page="feedback">üí¨ Feedback</a>
</nav>

<main>

<!-- HOME -->
<section id="home" class="page">
  <div class="card">
    <h2>Welcome to ElecZen</h2>
    <p>The fastest mobile EV charging service in Hyderabad.</p>
  </div>

  <div class="card">
    <h3>About Us</h3>
    <p>ElecZen is Hyderabad‚Äôs most advanced EV mobile charging service.</p>
    <ul>
      <li>‚ö° 24/7 Mobile Charging Vans</li>
      <li>üìç Real-time Location Dispatch</li>
      <li>üîê Secure Cloud Login</li>
      <li>üéÅ Rewards for Every Booking</li>
    </ul>
  </div>

  <div class="card">
    <h3>Daily EV Tip</h3>
    <p id="tipText">Loading...</p>
  </div>

  <!-- CURRENT LOCATION -->
  <div class="card">
    <h3>Your Current Location</h3>
    <button class="btn-primary" id="locBtn">Get Current Location</button>
    <p id="locStatus"></p>
    <p id="locAddress"></p>
  </div>
</section>

<!-- REGISTER -->
<section id="register" class="page" style="display:none">
  <div class="card">
    <h2>Create Account</h2>
    <form id="regForm">
      <input name="name" placeholder="Full Name" required>
      <input name="email" type="email" placeholder="Email" required>
      <input name="password" type="password" placeholder="Password" required>
      <input name="vehicle" placeholder="Vehicle Model" required>
      <button class="btn-primary">Register</button>
    </form>
    <p id="regMsg"></p>
  </div>
</section>

<!-- LOGIN -->
<section id="login" class="page" style="display:none">
  <div class="card">
    <h2>Login</h2>
    <input id="logEmail" placeholder="Email">
    <input id="logPass" type="password" placeholder="Password">
    <button class="btn-primary" id="loginBtn">Login</button>
    <p id="loginMsg"></p>
  </div>
</section>

<!-- ACCOUNT -->
<section id="account" class="page" style="display:none">
  <div class="card">
    <h2>My Account</h2>
    <div id="acctInfo">Please login first</div>

    <h3>Charging Request</h3>
    <button class="btn-primary" id="reqCharge" disabled>Request Charging</button>
    <p id="reqMsg"></p>

    <h3>Reward Points</h3>
    <p>Total: <span id="pointsCount">0</span></p>

    <button class="btn-primary" id="logoutBtn" disabled>Logout</button>
  </div>
</section>

<!-- PAYMENTS -->
<section id="payments" class="page" style="display:none">
  <div class="card">
    <h2>Payments</h2>

    <select id="payMethod">
      <option value="UPI">UPI</option>
      <option value="Card">Card</option>
      <option value="Wallet">Wallet</option>
      <option value="COD">Cash</option>
      
    </select>

    <input id="payAmount" type="number" placeholder="Enter amount (‚Çπ)">
    <button class="btn-primary" id="payBtn">Pay Now</button>
    <p id="payMsg"></p>
  </div>

  <div class="card">
    <h3>Payment History</h3>
    <div id="payHistory"></div>
  </div>
</section>

<!-- HISTORY -->
<section id="history" class="page" style="display:none">
  <div class="card">
    <h2>Booking History</h2>
    <div id="historyList"></div>
  </div>
</section>

<!-- FEEDBACK -->
<section id="feedback" class="page" style="display:none">
  <div class="card">
    <h2>Feedback</h2>
    <textarea id="fbText" rows="3" placeholder="Write your feedback..."></textarea>
    <button class="btn-primary" id="fbSubmit">Submit</button>
    <p id="fbMsg"></p>
  </div>

  <div class="card">
    <h3>Previous Feedback</h3>
    <div id="fbList"></div>
  </div>
</section>

</main>
</div>

<script>
/* Remove Loading Screen after fade-out */
setTimeout(() => {
  document.getElementById("loadingScreen").style.display = "none";
}, 3000);

/* PAGE SYSTEM */
const pages = document.querySelectorAll(".page");
const menu = document.querySelectorAll("nav a");
menu.forEach(a => a.onclick = () => show(a.dataset.page));

function show(page){
  pages.forEach(p => p.style.display = p.id === page ? "" : "none");
  menu.forEach(a => a.classList.toggle("active", a.dataset.page === page));
}

/* THEME */
themeToggle.onclick = () => document.body.classList.toggle("light");

/* EV TIPS */
const tips = [
  "Charge between 20‚Äì80% for battery health.",
  "Avoid fast-charging daily.",
  "Park in shade while charging.",
];
setInterval(() =>
  tipText.textContent = tips[Math.floor(Math.random() * tips.length)]
, 3000);

/* REGISTER */
regForm.onsubmit = e => {
  e.preventDefault();
  let u = {
    name: regForm.name.value,
    email: regForm.email.value,
    password: regForm.password.value,
    vehicle: regForm.vehicle.value
  };
  localStorage.setItem("user", JSON.stringify(u));
  regMsg.textContent = "Registered! Please login.";
  show("login");
};

/* LOGIN */
loginBtn.onclick = () => {
  let u = JSON.parse(localStorage.getItem("user") || "null");
  if (!u || u.email !== logEmail.value || u.password !== logPass.value)
    return loginMsg.textContent = "Invalid Credentials!";

  localStorage.setItem("logged", "yes");
  loginMsg.textContent = "Login Successful!";
  enableAccount();
  setTimeout(() => show("account"), 700);
};

/* ACCOUNT FUNCTIONS */
function enableAccount(){
  reqCharge.disabled = false;
  logoutBtn.disabled = false;
  loadAcc();
}
function disableAccount(){
  reqCharge.disabled = true;
  logoutBtn.disabled = true;
  acctInfo.textContent = "Please login first";
}

function loadAcc(){
  let u = JSON.parse(localStorage.getItem("user"));
  acctInfo.innerHTML = `
    <b>Name:</b> ${u.name}<br>
    <b>Email:</b> ${u.email}<br>
    <b>Vehicle:</b> ${u.vehicle}
  `;
}

/* CHARGING REQUEST */
reqCharge.onclick = () => {
  let h = JSON.parse(localStorage.getItem("bookings") || "[]");
  h.push({ time: new Date().toLocaleString() });
  localStorage.setItem("bookings", JSON.stringify(h));
  reqMsg.textContent = "Charging Request Submitted!";
  loadHistory();
};

/* PAYMENT SYSTEM */
payBtn.onclick = () => {
  let method = payMethod.value;
  let amount = Number(payAmount.value);
  if(amount <= 0) return payMsg.textContent = "Enter a valid amount.";

  let ph = JSON.parse(localStorage.getItem("payments") || "[]");
  ph.push({ method, amount, time: new Date().toLocaleString() });

  localStorage.setItem("payments", JSON.stringify(ph));
  payMsg.textContent = "Payment Successful!";
  loadPayHistory();
};

function loadPayHistory(){
  let ph = JSON.parse(localStorage.getItem("payments") || "[]");
  payHistory.innerHTML = ph.map(p =>
    `<div class="feedback-item">‚Çπ${p.amount} ‚Äî ${p.method}<br><small>${p.time}</small></div>`
  ).join("");
}
loadPayHistory();

/* HISTORY */
function loadHistory(){
  let h = JSON.parse(localStorage.getItem("bookings") || "[]");
  historyList.innerHTML = h.map(i =>
    `<div class="feedback-item">Requested at: ${i.time}</div>`
  ).join("");
}
loadHistory();

/* LOGOUT */
logoutBtn.onclick = () => {
  localStorage.removeItem("logged");
  disableAccount();
  show("login");
};

/* FEEDBACK */
fbSubmit.onclick = () => {
  let t = fbText.value.trim();
  if(t.length < 3) return fbMsg.textContent = "Too short!";
  let f = JSON.parse(localStorage.getItem("feedback") || "[]");
  f.push({ text:t, time:new Date().toLocaleString() });
  localStorage.setItem("feedback", JSON.stringify(f));
  fbMsg.textContent = "Submitted!";
  fbText.value = "";
  loadFeedback();
};

function loadFeedback(){
  let f = JSON.parse(localStorage.getItem("feedback") || "[]");
  fbList.innerHTML = f.map(x =>
    `<div class="feedback-item"><b>${x.time}</b><br>${x.text}</div>`
  ).join("");
}
loadFeedback();

/* AUTO-LOGIN */
if(localStorage.getItem("logged")==="yes") enableAccount();
else disableAccount();

/* CURRENT LOCATION */
locBtn.onclick = () => {
  locStatus.textContent = "Fetching location...";
  locAddress.textContent = "";

  if(!navigator.geolocation){
    locStatus.textContent = "Geolocation unavailable!";
    return;
  }

  navigator.geolocation.getCurrentPosition(async pos => {
    let lat = pos.coords.latitude;
    let lon = pos.coords.longitude;

    locStatus.innerHTML = `
      <b>Latitude:</b> ${lat}<br>
      <b>Longitude:</b> ${lon}
    `;

    try{
      let r = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
      let d = await r.json();
      locAddress.innerHTML = `<b>Address:</b> ${d.display_name}`;
    } catch {
      locAddress.textContent = "Unable to fetch address.";
    }

  }, () => locStatus.textContent = "Enable GPS permission.");
};
</script>

</body>
</html>














